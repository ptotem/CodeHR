<script>
    $(function(){
        $('.control-label').css('text-align','left');
    })
</script>

<div class="row-fluid">
<%= nested_form_for(@employee_master,html: {class: "form-horizontal"}) do |f| %>

    <% if @employee_master.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@employee_master.errors.count, "error") %> prohibited this employee_master from being
            saved:</h2>

          <ul>
            <% @employee_master.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
    <% end %>

  <div class="tabbable">
    <ul class="nav nav-tabs" id="myTab">
      <!--<li class="active"><a data-toggle="tab" href="#employee"><i class="green icon-home bigger-110"></i>Employees</a></li>-->
      <li class="dropdown active">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Employees<b class="caret"></b></a>
        <ul class="dropdown-menu dropdown-info">
          <li><a data-toggle="tab" href="#dropdown1">Personal</a></li>
          <li><a data-toggle="tab" href="#dropdown2">Work</a></li>
          <li><a data-toggle="tab" href="#dropdown3">Bank Details</a></li>
          <li><a data-toggle="tab" href="#dropdown4">Remarks</a></li>
          <li><a data-toggle="tab" href="#dropdown5">Employee CV</a></li>
        </ul>
      </li>
      <li><a data-toggle="tab" href="#reporting">Reporting Tos</a></li>
      <li><a data-toggle="tab" href="#employ_hists">Employment Histories</a></li>
      <li><a data-toggle="tab" href="#educations">Educations</a></li>
      <li><a data-toggle="tab" href="#family_details">Family Details</a></li>
      <li><a data-toggle="tab" href="#pf_nominations">PF Nominations</a></li>
      <li><a data-toggle="tab" href="#esis_nominations">Esis Nominations</a></li>
      <li><a data-toggle="tab" href="#employee_cv">Employee cV</a></li>
      <li><a data-toggle="tab" href="#dynamic_field">Dynamic Field</a></li>
    </ul>


    <div class="tab-content">

      <div id="dropdown1" class="tab-pane in active">

        <!--<p>-->
        <div class="row-fluid">
          <!--<div class="span6">-->
            <!--<div class="control-group">-->
              <!--<%#= raw custom_lable(@employee_master, :user_id) %>-->
              <!--<div class="controls">-->
                <!--<%#= f.number_field :user_id %>-->
                <!--<%#= f.select :user_id, options_from_collection_for_select(User.all ,'id','name') %>-->
              <!--</div>-->
            <!--</div>-->
          <!--</div>-->

          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :employee_code) %>
              <div class="controls">
                <%= f.text_field :employee_code %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :employee_name) %>
              <div class="controls">
                <%= f.text_field :employee_name %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= f.label :employee_middle_name_name,:class => "control-label" %>
              <div class="controls">
                <%= f.text_field :employee_middle_name_name %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= f.label :status,:class => "control-label" %>
              <div class="controls">
                <%= f.select :status, ['Active', 'Transferred', 'Resigned', 'Separated'] %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= f.label :gender,:class => "control-label" %>
              <div class="controls">
                <%= f.select(:gender, [['Male', 'M'], ['Female', 'F'], ['Other', 'O']]) %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :marital_status) %>
              <div class="controls">
                <%= f.select(:marital_status, [['Married'], ['Unmarried'], ['Separated'], ['In Relationship']]) %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
              <div class="control-group">
                <%= raw custom_lable(@employee_master, :date_of_birth) %>
                <div class="controls">
                  <%= f.date_select :date_of_birth %>
                </div>
              </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :group_master_id) %>
              <div class="controls">
                <%= f.select :group_master_id,options_from_collection_for_select(GroupMaster.all ,'id','group_name') %>
              </div>
            </div>
          </div>
        </div>

        <!--</p>-->
      </div>
      <div id="dropdown2" class="tab-pane">
        <!--<p>-->
        <div class="row-fluid">
          <div class="span12">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :date_of_joining) %>
              <div class="controls">
                <%= f.date_select :date_of_joining %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span4">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :group_id) %>
              <div class="controls">
                <%= f.number_field :group_id %>
              </div>
            </div>
          </div>
          <div class="span4">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :designation_joined_at) %>
              <div class="controls">
                <%= f.text_field :designation_joined_at %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :current_designation) %>
              <div class="controls">
                <%= f.text_field :current_designation %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :job_id) %>
              <div class="controls">
                <%= f.number_field :job_id %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span12">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :band_id) %>
              <div class="controls">
                <%#= f.number_field :band_id %>
                <%= f.select :band_id ,options_from_collection_for_select(BandMaster.all ,'id','band_name') %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :total_work_exp_years) %>
              <div class="controls">
                <%= f.number_field :total_work_exp_years %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :total_work_exp_months) %>
              <div class="controls">
                <%= f.number_field :total_work_exp_months %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :official_email) %>
              <div class="controls">
                <%= f.text_field :official_email %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :personal_email) %>
              <div class="controls">
                <%= f.text_field :personal_email %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span12">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :contact_numbers) %>
              <div class="controls">
                <%= f.phone_field :contact_numbers %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :personal_address) %>
              <div class="controls">
                <%= f.text_area(:personal_address, size:"20x5")  %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :address_for_communication) %>
              <div class="controls">
                <%= f.text_area(:address_for_communication, size:"20x5")  %>
              </div>
            </div>
          </div>
        </div>

        <!--</p>-->
      </div>

      <div id="dropdown3" class="tab-pane">
        <!--<p>-->
        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :bank_name) %>
              <div class="controls">
                <%= f.text_field :bank_name %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :account_number) %>
              <div class="controls">
                <%= f.text_field :account_number %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :rf_no) %>
              <div class="controls">
                <%= f.text_field :rf_no %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :esic_no) %>
              <div class="controls">
                <%= f.text_field :esic_no %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :pan_no) %>
              <div class="controls">
                <%= f.text_field :pan_no %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= raw custom_lable(@employee_master, :blood_group) %>
              <div class="controls">
                <%= f.text_field :blood_group %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span12">
            <div class="control-group">
              <%= f.label :date_of_leaving,:class => "control-label" %>
              <div class="controls">
                <%= f.date_select :date_of_leaving %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span12">
            <div class="control-group">
              <%= f.label :nature_of_separation,:class => "control-label" %>
              <div class="controls">
                <%= f.text_field :nature_of_separation %>
              </div>
            </div>
          </div>
        </div>

        <!--</p>-->
      </div>
      <div id="dropdown4" class="tab-pane">
        <!--<p>-->

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= f.label :remarks_1,:class => "control-label" %>
              <div class="controls">
                <%= f.text_area(:remarks_1, size:"40x3") %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= f.label :remarks_2,:class => "control-label" %>
              <div class="controls">
                <%= f.text_area(:remarks_2, size:"40x3") %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= f.label :remarks_3,:class => "control-label" %>
              <div class="controls">
                <%= f.text_area(:remarks_3, size:"40x3") %>
              </div>
            </div>
          </div>
          <div class="span6">
            <div class="control-group">
              <%= f.label :remarks_4,:class => "control-label" %>
              <div class="controls">
                <%= f.text_area(:remarks_4, size:"40x3") %>
              </div>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span6">
            <div class="control-group">
              <%= f.label :remarks_5,:class => "control-label" %>
              <div class="controls">
                <%= f.text_area(:remarks_5, size:"40x3") %>
              </div>
            </div>
          </div>
        </div>

        <!--</p>-->
      </div>
      <div id="dropdown5" class="tab-pane">
        <p>

        <div class="control-group">
          <%= f.label :employee_cv,:class => "control-label" %>
          <div class="controls">
            <%= f.file_field :employee_cv %>
          </div>
        </div>
        </p>
      </div>


      <div id="reporting" class="tab-pane">
        <p>
          <%= f.fields_for :reporting_tos do |reporting_tos| %>
            <div class="control-group">
              <%= reporting_tos.label :reporting_officer_id,:class => "control-label" %>
              <div class="controls">
                <%#= reporting_tos.text_field :reporting_officer_id %>
                <%= reporting_tos.select :reporting_officer_id ,options_from_collection_for_select(EmployeeMaster.all ,'id','employee_name') %>
                <%= reporting_tos.link_to_remove "Remove this task" %>
              </div>
            </div>
        <% end %>
        <%= f.link_to_add "Reporting Tos", :reporting_tos %>
        </p>
      </div>

      <div id="employ_hists" class="tab-pane">
        <p>    <%= f.fields_for :employment_hists do |employment_hists| %>
            <div class="control-group">
              <%= employment_hists.label :joined_from,:class => "control-label" %>
              <div class="controls">
                <div class="row-fluid input-append date">
                    <%#= employment_hists.text_field :joined_from, :class=>"span10 date-picker" %>
                    <input type="text" data-date-format="dd-mm-yyyy" id="joined_from" class="span10 date-picker">
                    <span class="add-on"><i class="icon-calendar"></i></span>
                </div>
              </div>
            </div>

            <!--<div class="control-group">-->
              <!--<div class="row-fluid input-append date">-->
                <!--<input type="text" data-date-format="dd-mm-yyyy" id="id-date-picker-1" class="span10 date-picker">-->
                <!--<span class="add-on"><i class="icon-calendar"></i></span>-->
              <!--</div>-->
            <!--</div>-->

            <div class="control-group">
              <%= employment_hists.label :leaved,:class => "control-label" %>
              <div class="controls">
                <%= employment_hists.text_field :leaved %>
              </div>
            </div>

            <div class="control-group">
              <%= employment_hists.label :organisation,:class => "control-label" %>
              <div class="controls">
                <%= employment_hists.text_field :organisation %>
              </div>
            </div>

            <div class="control-group">
              <%= employment_hists.label :designation,:class => "control-label" %>
              <div class="controls">
                <%= employment_hists.text_field :designation %>
              </div>
            </div>

            <div class="control-group">
              <div class="controls">
                <%= employment_hists.link_to_remove "Remove this task" %>
              </div>
            </div>

        <% end %>
        <%= f.link_to_add "Employment Hists", :employment_hists %></p>
      </div>

      <div id="educations" class="tab-pane">
        <p><%= f.fields_for :educations do |educations| %>
            <div class="control-group">
              <%= educations.label :name,:class => "control-label" %>
              <div class="controls">
                <%= educations.text_field :name %>
              </div>
            </div>

            <div class="control-group">
              <%= educations.label :description,:class => "control-label" %>
              <div class="controls">
                <%= educations.text_field :description %>
              </div>
            </div>

            <div class="control-group">
              <%= educations.label :marks,:class => "control-label" %>
              <div class="controls">
                <%= educations.text_field :marks %>
              </div>
            </div>

            <div class="control-group">
              <%= educations.label :grade,:class => "control-label" %>
              <div class="controls">
                <%= educations.text_field :grade %>
              </div>
            </div>

            <div class="control-group">
              <div class="controls">
                <%= educations.link_to_remove "Remove this task" %>
              </div>
            </div>

        <% end %>
        <%= f.link_to_add "Educations", :educations %></p>
      </div>

      <div id="family_details" class="tab-pane">
        <p>
          <%= f.fields_for :family_details do |family_details| %>
            <div class="control-group">
              <%= family_details.label :relationship,:class => "control-label" %>
              <div class="controls">
                <%= family_details.text_field :relationship %>
              </div>
            </div>

            <div class="control-group">
              <%= family_details.label :fname,:class => "control-label" %>
              <div class="controls">
                <%= family_details.text_field :fname %>
              </div>
            </div>

            <div class="control-group">
              <%= family_details.label :mname,:class => "control-label" %>
              <div class="controls">
                <%= family_details.text_field :mname %>
              </div>
            </div>

            <div class="control-group">
              <%= family_details.label :lname,:class => "control-label" %>
              <div class="controls">
                <%= family_details.text_field :lname %>
              </div>
            </div>

            <div class="control-group">
              <div class="controls">
                <%= family_details.link_to_remove "Remove this task" %>
              </div>
            </div>

        <% end %>
        <%= f.link_to_add "Family Details", :family_details %>
       </p>
      </div>

      <div id="pf_nominations" class="tab-pane">
        <p>
          <%= f.fields_for :pf_nominations do |pf_nominations| %>
            <div class="control-group">
              <%= pf_nominations.label :relationship,:class => "control-label" %>
              <div class="controls">
                <%= pf_nominations.text_field :relationship %>
              </div>
            </div>

            <div class="control-group">
              <%= pf_nominations.label :fname,:class => "control-label" %>
              <div class="controls">
                <%= pf_nominations.text_field :fname %>
              </div>
            </div>

            <div class="control-group">
              <%= pf_nominations.label :mname,:class => "control-label" %>
              <div class="controls">
                <%= pf_nominations.text_field :mname %>
              </div>
            </div>

            <div class="control-group">
              <%= pf_nominations.label :lname,:class => "control-label" %>
              <div class="controls">
                <%= pf_nominations.text_field :lname %>
              </div>
            </div>

            <div class="control-group">
              <div class="controls">
                <%= pf_nominations.link_to_remove "Remove this task" %>
              </div>
            </div>

        <% end %>
        <%= f.link_to_add "PF Nominations", :pf_nominations %>
        </p>
      </div>

      <div id="esis_nominations" class="tab-pane">
        <p>
          <%= f.fields_for :esis_nominations do |esis_nominations| %>
            <div class="control-group">
              <%= esis_nominations.label :relationship,:class => "control-label" %>
              <div class="controls">
                <%= esis_nominations.text_field :relationship %>
              </div>
            </div>

            <div class="control-group">
              <%= esis_nominations.label :fname,:class => "control-label" %>
              <div class="controls">
                <%= esis_nominations.text_field :fname %>
              </div>
            </div>

            <div class="control-group">
              <%= esis_nominations.label :mname,:class => "control-label" %>
              <div class="controls">
                <%= esis_nominations.text_field :mname %>
              </div>
            </div>

            <div class="control-group">
              <%= esis_nominations.label :lname,:class => "control-label" %>
              <div class="controls">
                <%= esis_nominations.text_field :lname %>
              </div>
            </div>

            <div class="control-group">
              <div class="controls">
                <%= esis_nominations.link_to_remove "Remove this task" %>
              </div>
            </div>

        <% end %>
        <%= f.link_to_add "Esis Nominations", :esis_nominations %>
        </p>
      </div>


      <div id="dynamic_field" class="tab-pane">
        <p>
          <% @fields = DynamicField.where(:oclass=>"EmployeeMaster") %>
        <h3 class="header lighter blue">Dynamic Field</h3>
        <% @fields.each do |field| %>
            <div class="control-group">
              <%= f.label field.name.to_sym,:class => "control-label" %>
              <div class="controls">
                <%= f.send(field.type.to_sym, field.name.to_sym )%>
              </div>
            </div>
        <% end %>



        </p>
      </div>
    </div>
  </div>
    <div class="form-actions">
      <%= f.submit :class=>"btn btn-info" %>
    </div>

<% end %>
</div>



