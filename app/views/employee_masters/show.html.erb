<p id="notice"><%= notice %></p>

<div class="row-fluid">
  <div class="offset1 span6">
    <div class="table-header">
      Employee Master Details :-
    </div>
    <table class="table table-striped table-bordered table-hover">
      <tbody>
          <!--<tr>-->
            <!--<th>User</th>-->
            <!--<td><%#= @employee_master.user_id %></td>-->
          <!--</tr>-->
          <tr>
            <th>Employee Code</th>
            <td><%= @employee_master.employee_code %></td>
          </tr>
          <tr>
            <th>Employee Name</th>
            <td><%= @employee_master.employee_name %></td>
          </tr>
          <tr>
            <th>Employee Middle Name</th>
            <td><%= @employee_master.employee_middle_name_name %></td>
          </tr>
          <tr>
            <th>Status</th>
            <td><%= @employee_master.status %></td>
          </tr>
          <tr>
            <th>Gender</th>
            <td><%= @employee_master.gender %></td>
          </tr>
          <tr>
            <th>Marital Status</th>
            <td><%= @employee_master.marital_status %></td>
          </tr>
          <tr>
            <th>Date of Birth</th>
            <td><%= @employee_master.date_of_birth %></td>
          </tr>
          <tr>
            <th>Date of Joining</th>
            <td><%= @employee_master.date_of_joining %></td>
          </tr>
          <tr>
            <th>Group</th>
            <td><%= @employee_master.group_master.group_name rescue nil %></td>
            <!--<td><%#= GroupMaster.find("#{@employee_master.group_master_id}").group_name %></td>-->
          </tr>
          <tr>
            <th>Designation Joined At</th>
            <td><%= @employee_master.designation_joined_at %></td>
          </tr>
          <tr>
            <th>Official Email</th>
            <td><%= @employee_master.official_email %></td>
          </tr>
          <tr>
            <th>Address for Communication</th>
            <td><%= @employee_master.address_for_communication %></td>
          </tr>
      </tbody>
    </table>
  </div>
</div>

<% if params[:action]=="emp_master_approval" %>
    <div class="row-fluid">
      <div class="offset4 span2">
        <%= button_tag "Approve", :class=>"btn btn-info", :id=>"approve_btn" %>
      </div>
    </div>
<% end %>

<%= link_to 'Edit', edit_employee_master_path(@employee_master) %> |
<%= link_to 'Back', employee_masters_path %>

<script>
  $(function(){
     $("#approve_btn").on('click', function(){

         var emp_id = "<%= @employee_master.id %>";

         var data = {emp_id: []};
         data["emp_id"].push(emp_id);

         $.ajax({
             url: "/approve_process/<%= params[:approval_id] %>/<%= params[:process_id] %>/<%= params[:step_no] %>/<%= @employee_master._id %>",
             type: "post",
             async: false,
             data: JSON.stringify(data),
             contentType: "application/json",
             success: function (data) {
                 console.log(data);
                 alert(data);
             }
         });

     });
  });
</script>
