<%= nested_form_for(@employee_detail, html: {class: "form-horizontal"}) do |f| %>
  <% if @employee_detail.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@employee_detail.errors.count, "error") %> prohibited this employee_detail from being saved:</h2>

      <ul>
      <% @employee_detail.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

    <div class="tabbable">
    <ul class="nav nav-tabs" id="myTab">
      <!--<li class="active"><a data-toggle="tab" href="#employee"><i class="green icon-home bigger-110"></i>Employees</a></li>-->
      <li class="dropdown active">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">Employees<b class="caret"></b></a>
        <ul class="dropdown-menu dropdown-info">
          <!--<li><a data-toggle="tab" href="#dropdown1">Personal</a></li>-->
          <li><a data-toggle="tab" href="#dropdown2">Work</a></li>
          <li><a data-toggle="tab" href="#dropdown3">Bank Details</a></li>
          <li><a data-toggle="tab" href="#dropdown4">Remarks</a></li>
          <li><a data-toggle="tab" href="#dropdown5">Employee CV</a></li>
        </ul>
      </li>
      <!--<li><a data-toggle="tab" href="#reporting">Reporting Tos</a></li>-->
      <li><a data-toggle="tab" href="#employ_hists">Employment Histories</a></li>
      <li><a data-toggle="tab" href="#educations">Educations</a></li>
      <li><a data-toggle="tab" href="#family_details">Family Details</a></li>
      <li><a data-toggle="tab" href="#pf_nominations">PF Nominations</a></li>
      <li><a data-toggle="tab" href="#esis_nominations">Esis Nominations</a></li>
      <li><a data-toggle="tab" href="#employee_cv">Employee cV</a></li>
      <li><a data-toggle="tab" href="#dynamic_field">Dynamic Field</a></li>
    </ul>


    <div class="tab-content">

    <div id="dropdown1" class="tab-pane in active">

      <!--<p>-->

      <!--</p>-->
    </div>
    <div id="dropdown2" class="tab-pane active">
      <!--<p>-->

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :current_designation) %>
            <label for="<%= @form[:current_designation].to_s %>" class="control-label"><%= @form[:current_designation].to_s %></label>
            <div class="controls">
              <%= f.text_field :current_designation %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :job_role_id) %>
            <label for="<%= @form[:job_role_id].to_s %>" class="control-label"><%= @form[:job_role_id].to_s %></label>
            <div class="controls">
              <%#= f.number_field :job_id %>
              <%= f.select :job_role_id ,options_from_collection_for_select(Role.all ,'id','name') %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span12">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :band_id) %>
            <label for="<%= @form[:band_id].to_s %>" class="control-label"><%= @form[:band_id].to_s %></label>
            <div class="controls">
              <%#= f.number_field :band_id %>
              <%= f.select :band_id ,options_from_collection_for_select(BandMaster.all ,'id','band_name') %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :total_work_exp_years) %>
            <label for="<%= @form[:total_work_exp_years].to_s %>" class="control-label"><%= @form[:total_work_exp_years].to_s %></label>
            <div class="controls">
              <%= f.number_field :total_work_exp_years %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :total_work_exp_months) %>
            <label for="<%= @form[:total_work_exp_months].to_s %>" class="control-label"><%= @form[:total_work_exp_months].to_s %></label>
            <div class="controls">
              <%= f.number_field :total_work_exp_months %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :personal_email) %>
            <label for="<%= @form[:personal_email].to_s %>" class="control-label"><%= @form[:personal_email].to_s %></label>
            <div class="controls">
              <%= f.text_field :personal_email %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span12">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :contact_numbers) %>
            <label for="<%= @form[:contact_numbers].to_s %>" class="control-label"><%= @form[:contact_numbers].to_s %></label>
            <div class="controls">
              <%= f.phone_field :contact_numbers %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :personal_address) %>
            <label for="<%= @form[:personal_address].to_s %>" class="control-label"><%= @form[:personal_address].to_s %></label>
            <div class="controls">
              <%= f.text_area(:personal_address, size:"20x5")  %>
            </div>
          </div>
        </div>
      </div>

      <!--</p>-->
    </div>

    <div id="dropdown3" class="tab-pane">
      <!--<p>-->
      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :bank_name) %>
            <label for="<%= @form[:bank_name].to_s %>" class="control-label"><%= @form[:bank_name].to_s %></label>
            <div class="controls">
              <%= f.text_field :bank_name %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :account_number) %>
            <label for="<%= @form[:account_number].to_s %>" class="control-label"><%= @form[:account_number].to_s %></label>
            <div class="controls">
              <%= f.text_field :account_number %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :rf_no) %>
            <label for="<%= @form[:rf_no].to_s %>" class="control-label"><%= @form[:rf_no].to_s %></label>
            <div class="controls">
              <%= f.text_field :rf_no %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :esic_no) %>
            <label for="<%= @form[:esic_no].to_s %>" class="control-label"><%= @form[:esic_no].to_s %></label>
            <div class="controls">
              <%= f.text_field :esic_no %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :pan_no) %>
            <label for="<%= @form[:pan_no].to_s %>" class="control-label"><%= @form[:pan_no].to_s %></label>
            <div class="controls">
              <%= f.text_field :pan_no %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= raw custom_lable(@employee_detail, :blood_group) %>
            <label for="<%= @form[:blood_group].to_s %>" class="control-label"><%= @form[:blood_group].to_s %></label>
            <div class="controls">
              <%= f.text_field :blood_group %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= f.label :date_of_leaving,:class => "control-label" %>
            <label for="<%= @form[:date_of_leaving].to_s %>" class="control-label"><%= @form[:date_of_leaving].to_s %></label>
            <div class="controls">
              <%#= f.date_select :date_of_leaving %>
              <div class="row-fluid input-append date">
                <%= f.text_field :date_of_leaving, :class=>"span6 date-picker" %>
                <span class="add-on"><i class="icon-calendar"></i></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span12">
          <div class="control-group">
            <%#= f.label :nature_of_separation,:class => "control-label" %>
            <label for="<%= @form[:nature_of_separation].to_s %>" class="control-label"><%= @form[:nature_of_separation].to_s %></label>
            <div class="controls">
              <%= f.text_field :nature_of_separation %>
            </div>
          </div>
        </div>
      </div>

      <!--</p>-->
    </div>
    <div id="dropdown4" class="tab-pane">
      <!--<p>-->

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= f.label :remarks_1,:class => "control-label" %>
            <label for="<%= @form[:remarks_1].to_s %>" class="control-label"><%= @form[:remarks_1].to_s %></label>
            <div class="controls">
              <%= f.text_area(:remarks_1, size:"40x3") %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= f.label :remarks_2,:class => "control-label" %>
            <label for="<%= @form[:remarks_2].to_s %>" class="control-label"><%= @form[:remarks_2].to_s %></label>
            <div class="controls">
              <%= f.text_area(:remarks_2, size:"40x3") %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= f.label :remarks_3,:class => "control-label" %>
            <label for="<%= @form[:remarks_3].to_s %>" class="control-label"><%= @form[:remarks_3].to_s %></label>
            <div class="controls">
              <%= f.text_area(:remarks_3, size:"40x3") %>
            </div>
          </div>
        </div>
        <div class="span6">
          <div class="control-group">
            <%#= f.label :remarks_4,:class => "control-label" %>
            <label for="<%= @form[:remarks_4].to_s %>" class="control-label"><%= @form[:remarks_4].to_s %></label>
            <div class="controls">
              <%= f.text_area(:remarks_4, size:"40x3") %>
            </div>
          </div>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span6">
          <div class="control-group">
            <%#= f.label :remarks_5,:class => "control-label" %>
            <label for="<%= @form[:remarks_5].to_s %>" class="control-label"><%= @form[:remarks_5].to_s %></label>
            <div class="controls">
              <%= f.text_area(:remarks_5, size:"40x3") %>
            </div>
          </div>
        </div>
      </div>

      <!--</p>-->
    </div>
    <div id="dropdown5" class="tab-pane">
      <p>

      <div class="control-group">
        <%#= f.label :employee_cv,:class => "control-label" %>
        <label for="<%= @form[:employee_cv].to_s %>" class="control-label"><%= @form[:employee_cv].to_s %></label>
        <div class="controls">
          <%= f.file_field :employee_cv %>
        </div>
      </div>
      </p>
    </div>


    <div id="reporting" class="tab-pane">
      <!--<p>-->
      <!--</p>-->
    </div>

    <div id="employ_hists" class="tab-pane">
      <p>
        <%= f.fields_for :employment_hists do |employment_hists| %>
            <span class="row-fluid">
              <span class="span6">
                <div class="control-group">
                  <%#= employment_hists.label :joined_from,:class => "control-label" %>
                  <label for="<%= @form[:joined_from].to_s %>" class="control-label"><%= @form[:joined_from].to_s %></label>
                  <div class="controls">
                    <div class="row-fluid input-append date">
                      <%= employment_hists.text_field :joined_from, :class=>"span6 date-picker" %>
                      <!--<input type="text" data-date-format="dd-mm-yyyy" id="joined_from" class="span10 date-picker">-->
                      <span class="add-on"><i class="icon-calendar"></i></span>
                    </div>
                  </div>
                </div>
              </span>
            </span>


            <span class="row-fluid">
              <span class="span6">
                <div class="control-group">
                  <%#= employment_hists.label :leaved,:class => "control-label" %>
                  <!--<lable class="control-label" style="font-size: 14px;">Left</lable>-->
                  <label for="<%= @form[:leaved].to_s %>" class="control-label"><%= @form[:leaved].to_s %></label>
                  <div class="controls">
                    <div class="row-fluid input-append date">
                      <%= employment_hists.text_field :leaved, :class=>"span6 date-picker" %>
                      <span class="add-on"><i class="icon-calendar"></i></span>
                    </div>
                  </div>
                </div>
              </span>
            </span>

            <span class="row-fluid">
              <span class="span6">
                <div class="control-group">
                  <%#= employment_hists.label :organisation,:class => "control-label" %>
                  <label for="<%= @form[:organisation].to_s %>" class="control-label"><%= @form[:organisation].to_s %></label>
                  <div class="controls">
                    <%= employment_hists.text_field :organisation %>
                  </div>
                </div>
              </span>
            </span>

            <span class="row-fluid">
              <span class="span6">
                <div class="control-group">
                  <%#= employment_hists.label :designation,:class => "control-label" %>
                  <label for="<%= @form[:designation].to_s %>" class="control-label"><%= @form[:designation].to_s %></label>
                  <div class="controls">
                    <%= employment_hists.text_field :designation %>
                  </div>
                </div>
              </span>
            </span>

            <span class="row-fluid">
              <span class="span6">
                <div class="control-group">
                  <div class="controls">
                    <%= employment_hists.link_to_remove "Remove this record" %>
                  </div>
                </div>
              </span>
            </span>


        <% end %>
        <%= f.link_to_add "Add new record", :employment_hists, :onclick=>"add_dp()" %></p>
    </div>

    <div id="educations" class="tab-pane">
      <p><%= f.fields_for :educations do |educations| %>
          <div class="control-group">
            <%#= educations.label :name,:class => "control-label" %>
            <label for="<%= @form[:name].to_s %>" class="control-label"><%= @form[:name].to_s %></label>
            <div class="controls">
              <%= educations.text_field :name %>
            </div>
          </div>

          <div class="control-group">
            <%#= educations.label :description,:class => "control-label" %>
            <label for="<%= @form[:description].to_s %>" class="control-label"><%= @form[:description].to_s %></label>
            <div class="controls">
              <%= educations.text_field :description %>
            </div>
          </div>

          <div class="control-group">
            <%#= educations.label :marks,:class => "control-label" %>
            <label for="<%= @form[:marks].to_s %>" class="control-label"><%= @form[:marks].to_s %></label>
            <div class="controls">
              <%= educations.text_field :marks %>
            </div>
          </div>

          <div class="control-group">
            <%#= educations.label :grade,:class => "control-label" %>
            <label for="<%= @form[:grade].to_s %>" class="control-label"><%= @form[:grade].to_s %></label>
            <div class="controls">
              <%= educations.text_field :grade %>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <%= educations.link_to_remove "Remove this record" %>
            </div>
          </div>

      <% end %>
      <%= f.link_to_add "Add new record", :educations %></p>
    </div>

    <div id="family_details" class="tab-pane">
      <p>
        <%= f.fields_for :family_details do |family_details| %>
          <div class="control-group">
            <%#= family_details.label :relationship,:class => "control-label" %>
            <label for="<%= @form[:family_detail_relationship].to_s %>" class="control-label"><%= @form[:family_detail_relationship].to_s %></label>
            <div class="controls">
              <%= family_details.text_field :relationship %>
            </div>
          </div>

          <div class="control-group">
            <%#= family_details.label :fname,:class => "control-label" %>
            <label for="<%= @form[:family_detail_fname].to_s %>" class="control-label"><%= @form[:family_detail_fname].to_s %></label>
            <div class="controls">
              <%= family_details.text_field :fname %>
            </div>
          </div>

          <div class="control-group">
            <%#= family_details.label :mname,:class => "control-label" %>
            <label for="<%= @form[:family_detail_mname].to_s %>" class="control-label"><%= @form[:family_detail_mname].to_s %></label>
            <div class="controls">
              <%= family_details.text_field :mname %>
            </div>
          </div>

          <div class="control-group">
            <%#= family_details.label :lname,:class => "control-label" %>
            <label for="<%= @form[:family_detail_lname].to_s %>" class="control-label"><%= @form[:family_detail_lname].to_s %></label>
            <div class="controls">
              <%= family_details.text_field :lname %>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <%= family_details.link_to_remove "Remove this record" %>
            </div>
          </div>

      <% end %>
      <%= f.link_to_add "Add new record", :family_details %>
      </p>
    </div>

    <div id="pf_nominations" class="tab-pane">
      <p>
        <%= f.fields_for :pf_nominations do |pf_nominations| %>
          <div class="control-group">
            <%#= pf_nominations.label :relationship,:class => "control-label" %>
            <label for="<%= @form[:pf_nomination_relationship].to_s %>" class="control-label"><%= @form[:pf_nomination_relationship].to_s %></label>
            <div class="controls">
              <%= pf_nominations.text_field :relationship %>
            </div>
          </div>

          <div class="control-group">
            <%#= pf_nominations.label :fname,:class => "control-label" %>
            <label for="<%= @form[:pf_nomination_fname].to_s %>" class="control-label"><%= @form[:pf_nomination_fname].to_s %></label>
            <div class="controls">
              <%= pf_nominations.text_field :fname %>
            </div>
          </div>

          <div class="control-group">
            <%#= pf_nominations.label :mname,:class => "control-label" %>
            <label for="<%= @form[:pf_nomination_mname].to_s %>" class="control-label"><%= @form[:pf_nomination_mname].to_s %></label>
            <div class="controls">
              <%= pf_nominations.text_field :mname %>
            </div>
          </div>

          <div class="control-group">
            <%#= pf_nominations.label :lname,:class => "control-label" %>
            <label for="<%= @form[:pf_nomination_lname].to_s %>" class="control-label"><%= @form[:pf_nomination_lname].to_s %></label>
            <div class="controls">
              <%= pf_nominations.text_field :lname %>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <%= pf_nominations.link_to_remove "Remove this record" %>
            </div>
          </div>

      <% end %>
      <%= f.link_to_add "Add new record", :pf_nominations %>
      </p>
    </div>

    <div id="esis_nominations" class="tab-pane">
      <p>
        <%= f.fields_for :esis_nominations do |esis_nominations| %>
          <div class="control-group">
            <%#= esis_nominations.label :relationship,:class => "control-label" %>
            <label for="<%= @form[:esis_nomination_relationship].to_s %>" class="control-label"><%= @form[:esis_nomination_relationship].to_s %></label>
            <div class="controls">
              <%= esis_nominations.text_field :relationship %>
            </div>
          </div>

          <div class="control-group">
            <%#= esis_nominations.label :fname,:class => "control-label" %>
            <label for="<%= @form[:esis_nomination_fname].to_s %>" class="control-label"><%= @form[:esis_nomination_fname].to_s %></label>
            <div class="controls">
              <%= esis_nominations.text_field :fname %>
            </div>
          </div>

          <div class="control-group">
            <%#= esis_nominations.label :mname,:class => "control-label" %>
            <label for="<%= @form[:esis_nomination_mname].to_s %>" class="control-label"><%= @form[:esis_nomination_mname].to_s %></label>
            <div class="controls">
              <%= esis_nominations.text_field :mname %>
            </div>
          </div>

          <div class="control-group">
            <%#= esis_nominations.label :lname,:class => "control-label" %>
            <label for="<%= @form[:esis_nomination_lname].to_s %>" class="control-label"><%= @form[:esis_nomination_lname].to_s %></label>
            <div class="controls">
              <%= esis_nominations.text_field :lname %>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <%= esis_nominations.link_to_remove "Remove this record" %>
            </div>
          </div>

      <% end %>
      <%= f.link_to_add "Add new record", :esis_nominations %>
      </p>
    </div>


    <div id="dynamic_field" class="tab-pane">
      <!--<p>-->
      <!--</p>-->
    </div>
    </div>
    </div>
    
  <div class="actions">
    <%= f.submit @form_config[:submit], :class=>"btn btn-info" %>
  </div>
<% end %>

<!--<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>-->
<script src="/assets/bootstrap-datepicker.min.js"></script>

<script>
    $(function(){
        $('.date-picker').datepicker();

        $('body').on('click', function(){
            $('.date-picker').show();
        });
    });
    function add_dp(){
        $('.date-picker').datepicker();
    }
</script>
