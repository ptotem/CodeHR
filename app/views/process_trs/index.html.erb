<div class="row-fluid">
  <div class="span4">
    <%= link_to 'New Process TR', new_process_tr_path, :class=>"btn btn-info" %>
  </div>
</div>

<br>

<div class="row-fluid">
  <div class="span12">
    <div class="table-header">Listing Process TRs</div>
    <table id="process_tr_table" class="table table-striped table-bordered table-hover">
      <thead>
          <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Initiator</th>
            <th>State</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
      </thead>

      <tbody>
          <% @process_trs.each do |process_tr| %>
              <tr>
                <td><%= process_tr.code %></td>
                <td><%= process_tr.name %></td>
                <td><%= User.where(:"_id"=>process_tr.user_id).first.name rescue nil %></td>
                <td>
                  <%#= process_tr.state %>

                  <% if process_tr.state == "finished" %>
                      <span class='label label-success'><%= process_tr.state %></span>
                  <% elsif process_tr.state == "processing" %>
                      <span class='label label-info arrowed-in'><%= process_tr.state %></span>
                  <% elsif process_tr.state == "created" %>
                      <span class='label label-warning arrowed arrowed-right'><%= process_tr.state %></span>
                  <% end %>

                </td>
                <td><%= link_to 'Show', process_tr %></td>
                <td><%= link_to 'Edit', edit_process_tr_path(process_tr) %></td>
                <td><%= link_to 'Destroy', process_tr, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
          <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= javascript_include_tag "jquery.dataTables.min" %>
<%= javascript_include_tag "jquery.dataTables.zbootstrap" %>
<%= javascript_include_tag "custom_dataTable" %>


<script>
    $(function(){
        apply_dataTable('#process_tr_table', '#process_tr_table_wrapper','#process_tr_table_length', '#process_tr_table_filter');
    });
</script>
