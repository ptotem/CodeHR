<% @emp = EmployeeMaster.where(:official_email => current_user.email).last %>
<div class="row-fluid">
  <div class="span12">
    <div class="table-header">Listing Vacancy</div>
    <table id="vacancy_table" class="table table-striped table-bordered table-hover">
      <thead>
          <tr>
            <th>Role</th>
            <th>Sourcing Type</th>
            <th>Department</th>
            <th>Openings</th>
            <th>Apply</th>
            <% if @emp.roles.first.name == 'Admin' || @emp.roles.first.name == 'Human Resource'%>
              <th>Update</th>
            <% end %>
          </tr>
      </thead>

      <tbody>
          <% @vacancies.each do |vacancy| %>
              <tr>
                <td><%= vacancy.role['name'] %></td>
                <td><%= vacancy['sourcing_strategy'] %></td>
                <td><%=vacancy.band_master['band_name'] %></td>
                <td><%=vacancy['no_of_position'] %></td>
                
                 <td><%= link_to 'Apply', apply_plan_path(vacancy)%></td>
                <% if @emp.roles.first.name == 'Admin'%>
                  <td><%= link_to 'Edit', update_opening_path(vacancy) %></td>
                <% end %>
              </tr>
          <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= javascript_include_tag "jquery.dataTables.min" %>
<%= javascript_include_tag "jquery.dataTables.zbootstrap" %>
<%= javascript_include_tag "custom_dataTable" %>


<script>
    $(function(){
        apply_dataTable('#vacancy_table', '#vacancy_table_wrapper','#vacancy_table_length', '#vacancy_table_filter');
    });
</script>