<!--<div class="row-fluid">-->
  <!--<div class="span4">-->
    <!--<%#= link_to 'New Notification Master', new_notification_master_path, :class=>"btn btn-info" %>-->
  <!--</div>-->
<!--</div>-->

<br>

<h1></h1>

<div class="row-fluid">
  <div class="span12">
    <div class="table-header">Listing Notification Masters</div>
    <table id="notification_master_table" class="table table-striped table-bordered table-hover">
      <thead>
          <tr>
            <th class="center">
              <label><input type="checkbox" id="select_all_records"/><span class="lbl"></span></label>
            </th>
            <!--<th>Code</th>-->
            <th>Title</th>
            <th>Description</th>
            <th>Type</th>
            <th></th>
            <!--<th></th>-->
            <th></th>
            <th><%= link_to 'Destroy All', destroy_all_notifications_path, method: :delete, data: { confirm: 'Are you sure?' }, :id=>"delete_all_btn" %></th>
          </tr>
      </thead>

      <tbody>
          <% @notification_masters.each do |notification_master| %>
              <tr id="<%= notification_master.id %>">
                <td class='center'>
                  <label><input type='checkbox' /><span class="lbl"></span></label>
                </td>
                <!--<td><%#= notification_master.code %></td>-->
                <td><%= notification_master.title %></td>
                <td><%= raw notification_master.description %></td>
                <td><%= notification_master.type %></td>
                <td><%= link_to 'Show', notification_master %></td>
                <!--<td><%#= link_to 'Edit', edit_notification_master_path(notification_master) %></td>-->
                <td><%= link_to 'Destroy', notification_master, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                <td><%#= link_to 'Destroy', notification_master, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
          <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= javascript_include_tag "jquery.dataTables.min" %>
<%= javascript_include_tag "jquery.dataTables.zbootstrap" %>
<%= javascript_include_tag "custom_dataTable" %>


<script>
    $(function(){
        apply_dataTable('#notification_master_table', '#notification_master_table_wrapper','#notification_master_table_length', '#notification_master_table_filter');

        $('table#notification_master_table th input:checkbox').on('click' , function(){
            var that = this;

            //$(this).closest('table').find('tr').each(function(){
               //console.log($(this).attr('id'));
            //});
            toggle_link();

            $(this).closest('table').find('tr > td:first-child input:checkbox')
                    .each(function(){
                        this.checked = that.checked;
                        $(this).closest('tr').toggleClass('selected');
                    });

        });

        toggle_link();

    });

    function toggle_link(){
        if (!$('#select_all_records').is(":checked"))
        {
            $('#delete_all_btn').css('pointer-events','none');
            $('#delete_all_btn').css('color','gray');
        }
        else{
            $('#delete_all_btn').css('pointer-events','auto');
            $('#delete_all_btn').css('color','#0088CC');
        }
    }
</script>
